!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).Gulu={})}(this,(function(e){"use strict";const t=(e,t,o)=>new Promise(((s,n)=>{const r=new XMLHttpRequest;r.onreadystatechange=function(){4===r.readyState&&(200===r.status?s(JSON.parse(r.responseText)):n(r.status))},"get"!==e&&"GET"!==e||("object"==typeof o&&(o=Object.keys(o).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(o[e])})).join("&")),t=o?t+"?"+o:t,r.open(e,t,!0),r.send()),"post"!==e&&"POST"!==e||(r.open(e,t,!0),r.setRequestHeader("Content-type","application/json; charset=utf-8"),r.setRequestHeader("Accept","*/*"),r.send(JSON.stringify(o)))})),o=(e,t,o)=>new Promise(((s,n)=>{const r=new XMLHttpRequest;r.onreadystatechange=function(){4===r.readyState&&(console.log(r),200===r.status?s(r.responseText):n(r.status))},"post"!==e&&"POST"!==e||(r.open(e,t,!0),r.setRequestHeader("Content-type","application/json; charset=utf-8"),r.setRequestHeader("Accept","*/*"),r.send(JSON.stringify(o)))})),s="http://127.0.0.1:9585/icvs2/";var n={login:e=>t("post",`${s}login`,e),getDeviceList:e=>t("get",`${s}CAS/C_CAS_QueryPUIDSets`,e),getDeviceByPuid:e=>t("get",`${s}C_CAS_QueryPUIDRes`,e),getPlayVideoId:e=>t("get",`${s}video/startVideo2`,e),ptzControl:e=>{let o=e.puid||"",n=e.idx||0,r=e.control||"",a="",i=e.token;if(o&&r){if("left"===r||"up"===r||"right"===r||"down"===r||"stop"===r){return t("post",`${s}PTZ/C_PTZ_Turn`,{puid:o,motion:r,idx:n,token:i})}if("zoomin"===r){return t("post",`${s}PTZ/C_PTZ_ZoomInPicture`,{puid:o,idx:n,token:i})}if("zoomout"===r){return t("post",`${s}PTZ/C_PTZ_ZoomOutPicture`,{puid:o,idx:n,token:i})}if("stopzoom"===r){return t("post",`${s}PTZ/C_PTZ_StopPictureZoom`,{puid:o,idx:n,token:i})}if("focusfar"===r){return t("post",`${s}PTZ/C_PTZ_MakeFocusFar`,{puid:o,idx:n,token:i})}if("focusnear"===r){return t("post",`${s}PTZ/C_PTZ_MakeFocusNear`,{puid:o,idx:n,token:i})}if("stopfocus"===r){return t("post",`${s}PTZ/C_PTZ_StopFocusMove`,{puid:o,idx:n,token:i})}if("augment"===r){return a='<?xml version="1.0" encoding="UTF-8"?><M Type="ComReq"><C Type="G" Prio="1" EPID="system" Lang="zh_CN"> <Res Type="IV" Idx="'+n+'" OptID="C_PTZ_AugmentAperture" Stream="0"><Param></Param></Res></C></M>',t("post",`${s}RawRequest?dstType=201&dstID='${o}'&token=${i}`,{xml:a})}if("minish"===r){return a='<?xml version="1.0" encoding="UTF-8"?><M Type="ComReq"><C Type="G" Prio="1" EPID="system" Lang="zh_CN"><Res Type="IV" Idx="'+n+'" OptID="C_PTZ_MinishAperture" Stream="0"><Param></Param></Res></C></M>',t("post",`${s}RawRequest?dstType=201&dstID='${o}'&token=${i}`,{xml:a})}if("stopaperture"===r){return a='<?xml version="1.0" encoding="UTF-8"?><M Type="ComReq"><C Type="G" Prio="1" EPID="system" Lang="zh_CN"><Res Type="IV" Idx="'+n+'" OptID="C_PTZ_StopApertureZoom" Stream="0"><Param></Param></Res></C></M>',t("post",`${s}RawRequest?dstType=201&dstID='${o}'&token=${i}`,{xml:a})}}},setPresetPos:e=>t("post",`${s}PTZ/C_PTZ_SetPresetPos`,e),moveToPresetPos:e=>t("post",`${s}PTZ/C_PTZ_MoveToPresetPos`,e),gotoOriginalPresetPos:e=>t("post",`${s}PTZ/C_PTZ_GotoOriginalPresetPos`,e),startCloudSnapshot:e=>t("post",`${s}CSS/C_CSS_StartManualSnapshot`,e),startCloudStorage:e=>t("post",`${s}CSS/C_CSS_StartManualStorage`,e),stopCloudStorage:e=>t("post",`${s}CSS/C_CSS_StopManualStorage`,e),startTalk:e=>t("get",`${s}audio/startTalk2`,e),startCall:e=>t("get",`${s}audio/startCall2`,e),stoptStream:e=>t("get",`${s}stopPlay2`,e),getCloudFile:e=>t("get",`${s}CSS/C_CSS_QueryStorageFiles`,e),getDeviceFile:e=>t("get",`${s}SG/C_SG_QueryRecordFiles`,e),downloadCloudFile:e=>t("get",`${s}downloadCloudFile2`,e),downloadDeviceFile:e=>t("get",`${s}downloadDeviceFile2`,e),setPuaseDownload:e=>t("get",`${s}puaseDownload2`,e),setRestoreDownload:e=>t("get",`${s}restoreDownload2`,e),setStopDownload:e=>t("get",`${s}stopDownload2`,e),getVodCloudFile:e=>t("get",`${s}vodCloudFile2`,e),getVodDeviceFile:e=>t("get",`${s}vodDeviceFile2`,e),setPuaseVod:e=>t("get",`${s}puaseVod2`,e),setRestoreVod:e=>t("get",`${s}restoreVod2`,e),setSpeedVod:e=>t("get",`${s}setVodSpeed2`,e),setOffsetVod:e=>t("get",`${s}setVodOffset2`,e),subscriptionGps:e=>{let t=e.address,s=e.token,n=e.epid||"",r=e.puid||"",a=e.idx||0;return o("POST",t+"RawRequest?dstType=33&token="+s,{xml:'<?xml version="1.0" encoding="UTF-8"?><M Type="ComReq"><C Type="C" Prio="1" EPID="'+n+'"><Res Type="ST" Idx="'+a+'" OptID="C_GS_SubscribeGPSData"><Param></Param></Res></C><OSets><Res OType="201" OID="'+r+'" Type="GPS" Idx="'+a+'"></Res></OSets></M>'})},getPuidLastGps:e=>{let t=e.address,s=e.token,n=e.puid||[],r=e.epid||"",a="<OSets>";return a+='<Res OType="201" OID="'+n+'" Type="GPS" Idx="0"></Res>',a+="</OSets>",o("POST",t+'RawRequest?dstType=33&dstID=""&token='+s,{xml:'<?xml version="1.0" encoding="UTF-8"?><M Type="ComReq"><C Type="C" Prio="1" EPID="'+r+'"><Res Type="ST" Idx="0" OptID="C_GS_QueryLastGPSData"><Param></Param></Res></C>'+a+"</M>"})},getPuidHistoryGps:e=>{let t=e.address,s=e.token,n=e.offset||0,r=e.count||100,a=e.begin,i=e.end,d=e.puid,p=e.epid||"",u="<OSets>";return u+='<Res OType="201" OID="'+d+'" Type="ST" Idx="0"></Res>',u+="</OSets>",o("POST",t+'RawRequest?dstType=33&dstID=""&token='+s,{xml:'<?xml version="1.0" encoding="UTF-8"?><M Type="ComReq"><C Type="C" Prio="1" EPID="'+p+'"><Res Type="ST" Idx="0" OptID="C_GS_QueryHistoryGPSData"><Param  Offset="'+n+'" Count="'+r+'" Begin="'+a+'" End="'+i+'"></Param></Res></C>'+u+"</M>"})}};e.webcu2plugin=n,Object.defineProperty(e,"__esModule",{value:!0})}));
